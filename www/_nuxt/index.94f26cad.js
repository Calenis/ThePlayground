import{a as N,r as P,b as B,w as M,u as k,e as j,f as O,h as E,i as T,j as $,k as R,l as F,m as H,p as I,q as D,s as i,F as C,t as U,v as f,x as A,y as m,o as V,c as S,z as g,A as v,B as L}from"./entry.9a7e52e9.js";const J=()=>null;function x(...r){const d=typeof r[r.length-1]=="string"?r.pop():void 0;typeof r[0]!="string"&&r.unshift(d);let[t,n,e={}]=r;if(typeof t!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof n!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");e.server=e.server??!0,e.default=e.default??J,e.lazy=e.lazy??!1,e.immediate=e.immediate??!0;const a=N(),_=()=>a.isHydrating?a.payload.data[t]:a.static.data[t],y=()=>_()!==void 0;a._asyncData[t]||(a._asyncData[t]={data:P(_()??e.default?.()??null),pending:P(!y()),error:P(a.payload._errors[t]?B(a.payload._errors[t]):null)});const s={...a._asyncData[t]};s.refresh=s.execute=(u={})=>{if(a._asyncDataPromises[t]){if(u.dedupe===!1)return a._asyncDataPromises[t];a._asyncDataPromises[t].cancelled=!0}if(u._initial&&y())return _();s.pending.value=!0;const p=new Promise((l,o)=>{try{l(n(a))}catch(c){o(c)}}).then(l=>{if(p.cancelled)return a._asyncDataPromises[t];e.transform&&(l=e.transform(l)),e.pick&&(l=K(l,e.pick)),s.data.value=l,s.error.value=null}).catch(l=>{if(p.cancelled)return a._asyncDataPromises[t];s.error.value=l,s.data.value=k(e.default?.()??null)}).finally(()=>{p.cancelled||(s.pending.value=!1,a.payload.data[t]=s.data.value,s.error.value&&(a.payload._errors[t]=B(s.error.value)),delete a._asyncDataPromises[t])});return a._asyncDataPromises[t]=p,a._asyncDataPromises[t]};const b=()=>s.refresh({_initial:!0}),w=e.server!==!1&&a.payload.serverRendered;{const u=E();if(u&&!u._nuxtOnBeforeMountCbs){u._nuxtOnBeforeMountCbs=[];const l=u._nuxtOnBeforeMountCbs;u&&(j(()=>{l.forEach(o=>{o()}),l.splice(0,l.length)}),O(()=>l.splice(0,l.length)))}w&&a.isHydrating&&y()?s.pending.value=!1:u&&(a.payload.serverRendered&&a.isHydrating||e.lazy)&&e.immediate?u._nuxtOnBeforeMountCbs.push(b):e.immediate&&b(),e.watch&&M(e.watch,()=>s.refresh());const p=a.hook("app:data:refresh",l=>{if(!l||l.includes(t))return s.refresh()});u&&O(p)}const h=Promise.resolve(a._asyncDataPromises[t]).then(()=>s);return Object.assign(h,s),h}function K(r,d){const t={};for(const n of d)t[n]=r[n];return t}const W=()=>{const r=N(),d=T(),t=d.value?`Bearer ${d.value}`:void 0,{supabase:{url:n,key:e,client:a}}=$().public,_=t?R(a,{global:{headers:{Authorization:t}}}):a,y=r._supabaseClient?.headers.Authorization!==t;return(!r._supabaseClient||y)&&(r._supabaseClient=F(n,e,_)),r._supabaseClient},z=W(),{data:q,error:ae}=H(await x(async()=>{const{data:r}=await z.from("products").select("*");return{products:r}},"$uAVygzpNGM")),G=()=>({products:q}),X={getProductByID:r=>d=>r.products.find(t=>t.id===d),getProducts:r=>r.products},Q={async addProduct(r){await x(async()=>{await z.from("products").insert(JSON.parse(JSON.stringify(r))).select("*").then(d=>{this.products[Object.keys(this.products)].push(d.data[0]),console.log(this.products)})},"$0bmTjpEwXP")},DeleteProduct(){}},Y=I("products",{state:G,getters:X,actions:Q}),Z=L("br",null,null,-1),ee={data(){return{dialog:!1,form:{region:"",store_name:"",p_brand:"",p_name:"",p_description:"",p_price:0,p_weight_type:"",p_weight:0}}},methods:{}},ne=Object.assign(ee,{__name:"index",setup(r){const d=Y(),t=d.getProducts;return(n,e)=>{const a=m("v-spacer"),_=m("v-card-title"),y=m("v-card-subtitle"),s=m("v-card-text"),b=m("v-card"),w=m("v-list"),h=m("v-btn"),u=m("v-select"),p=m("v-text-field"),l=m("v-dialog");return V(),D(C,null,[i(a),(V(!0),D(C,null,U(k(t),o=>(V(),S(w,{key:o},{default:f(()=>[(V(!0),D(C,null,U(o,c=>(V(),S(b,{key:c,outline:""},{default:f(()=>[i(_,null,{default:f(()=>[g(v(c.store_name),1)]),_:2},1024),i(y,null,{default:f(()=>[g(v(c.p_weight)+" "+v(c.p_weight_type),1)]),_:2},1024),i(s,null,{default:f(()=>[g(" $"+v(c.p_price)+" - "+v(c.p_name)+" : "+v(c.p_brand)+" ",1),Z,g(" "+v(c.p_description),1)]),_:2},1024),i(s)]),_:2},1024))),128))]),_:2},1024))),128)),i(h,{onClick:e[0]||(e[0]=A(o=>n.dialog=!0,["prevent"]))},{default:f(()=>[g(" Submit ")]),_:1}),i(l,{modelValue:n.dialog,"onUpdate:modelValue":e[10]||(e[10]=o=>n.dialog=o),width:"80%"},{default:f(()=>[i(b,null,{default:f(()=>[i(u,{label:"Region",modelValue:n.form.region,"onUpdate:modelValue":e[1]||(e[1]=o=>n.form.region=o),type:"text",items:["CANADA","UK","USA"]},null,8,["modelValue"]),i(p,{label:"Store Name",modelValue:n.form.store_name,"onUpdate:modelValue":e[2]||(e[2]=o=>n.form.store_name=o),type:"text"},null,8,["modelValue"]),i(p,{label:"Product Brand",modelValue:n.form.p_brand,"onUpdate:modelValue":e[3]||(e[3]=o=>n.form.p_brand=o),type:"text"},null,8,["modelValue"]),i(p,{label:"Product Name",modelValue:n.form.p_name,"onUpdate:modelValue":e[4]||(e[4]=o=>n.form.p_name=o),type:"text"},null,8,["modelValue"]),i(p,{label:"Product Description",modelValue:n.form.p_description,"onUpdate:modelValue":e[5]||(e[5]=o=>n.form.p_description=o),type:"text"},null,8,["modelValue"]),i(p,{label:"Product Price",modelValue:n.form.p_price,"onUpdate:modelValue":e[6]||(e[6]=o=>n.form.p_price=o),type:"text"},null,8,["modelValue"]),i(u,{label:"Weight Type",modelValue:n.form.p_weight_type,"onUpdate:modelValue":e[7]||(e[7]=o=>n.form.p_weight_type=o),type:"text",items:["oz","lb","m","L","mg","g","kg"]},null,8,["modelValue"]),i(p,{label:"Product Weight",modelValue:n.form.p_weight,"onUpdate:modelValue":e[8]||(e[8]=o=>n.form.p_weight=o),type:"text"},null,8,["modelValue"]),i(h,{onClick:e[9]||(e[9]=A(o=>k(d).addProduct(n.form),["prevent"]))},{default:f(()=>[g(" Input a bunch of useless data ")]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});export{ne as default};
